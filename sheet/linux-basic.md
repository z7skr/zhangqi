#Linux 文件

## 文件属性

`ls -lih`
```
total 8
# inode	属性和权限	硬链接个数	属主	组	大小	?	?	最后时间
 433698 drwx------@  4 bytedance  staff   128B  3  5 16:39 Applications
 296502 drwx------+  8 bytedance  staff   256B  3  7 00:59 Desktop
 296546 drwx------@ 11 bytedance  staff   352B  3  9 21:23 Documents
 296548 drwx------@  5 bytedance  staff   160B  3 11 16:23 Downloads
 296504 drwx------@ 67 bytedance  staff   2.1K  3 10 11:21 Library
 296544 drwx------+  4 bytedance  staff   128B  2 24 11:01 Movies
 296498 drwx------+  5 bytedance  staff   160B  2 25 11:33 Music
 296500 drwx------+  4 bytedance  staff   128B  2 24 11:56 Pictures
 296540 drwxr-xr-x+  6 bytedance  staff   192B  3  9 15:08 Public
 393538 -rw-r--r--   1 bytedance  staff   102B  2 24 17:47 gitig
1790221 lrwxr-xr-x   1 bytedance  staff     7B  3 11 16:56 link-z -> z7notes
1252882 drwxr-xr-x  15 bytedance  staff   480B  3  4 00:53 miniconda3
1169557 drwxr-xr-x   2 bytedance  staff    64B  3  4 00:48 opt
1630307 drwxrwxrwx   4 root       staff   128B  3  9 18:27 workspace
1290428 drwxr-xr-x  11 bytedance  staff   352B  3 10 10:57 z7notes
```

## 文件类型

类似于 'drwxr-xr-x' 这样的, 其中第一个字符表示文件类型，一共有四种类型：

- 普通文件 -. 这些文件一般是用一些相关的应用程序创建。这类文件的删除方式是用rm 命令。
	- ASCII，纯文本文件，可以用 cat 查看
	- binary，二进制文件，可执行文件，比如 cat 其实就是一个可执行文件
	- data，数据格式文件
- 目录文件 d. 
- 设备文件.  一般存放在 /dev 目录下。
	- 字符设备文件 c. 串行接口设备，如键盘鼠标等
	- 块设备文件 b. 存储数据的接口设备，硬盘等，/dev/sda
- 数据接口文件 s. 这种类型的文件通常被用在网络上的数据承接了。我们可以启动一个程序来监听客户端的要求， 而客户端就可以透过这个socket来进行数据的沟通了
- 符号链接文件 l.
- 数据输送文件 p. FIFO 也是一种特殊的文件类型，主要的目的在解决多个程序同时存取一个文件所造成的错误问题。

## 文件权限

'drwxr-xr-x' 的第2到10个字符分别表示文件所有者，同组用户、其他用户对该文件的权限。

权限范围：
- u ：目录或者文件的当前的用户
- g ：目录或者文件的当前的群组
- o ：除了目录或者文件的当前用户或群组之外的用户或者群组
- a ：所有的用户及群组

权限代号：
- r ：读权限，用数字4表示
- w ：写权限，用数字2表示
- x ：执行权限，用数字1表示
- \- ：删除权限，用数字0表示
- s ：特殊权限 


## 文件扩展名

基本上，Linux的文件是没有所谓的扩展名的，一个Linux文件能不能被执行，与他的第一栏的十个属性有关， 与扩展名名根本一点关系也没有。

一般来说，以扩展名来区分文件的用途：

- .sh, scripts, 脚本, 批处理文件
- .tar, .tar.gz, .zip, .tgz, 打包, 压缩文件
- ...


# linux 目录结构

linux 是树形目录, 所有的目录、文件、设备都在/之下，一切都视为文件。

目录有四种属性：

- shareable, 可以分享给其他系统挂载使用的目录，所以包括执行文件与用户的邮件等数据， 是能够分享给网络上其他主机挂载用的目录
- unshareable，自己机器上面运作的装置文件或者是与程序有关的socket文件等， 由于仅与自身机器有关，所以当然就不适合分享给其他主机了。
- static，有些数据是不会经常变动的，跟随着distribution而不变动。 例如函式库、文件说明文件、系统管理员所管理的主机服务配置文件等等；
- variable，经常改变的数据，例如登录文件、一般用户可自行收受的新闻组等。

事实上，Filesystem Hierarchy Standard针对目录树架构仅定义出三层目录底下应该放置什么数据而已，分别是底下这三个目录的定义：
- /, (root, 根目录)：与开机系统有关；
- /usr, (unix software resource)：与软件安装/执行有关；
- /var, (variable)：与系统运作过程有关。

树形结构及相关目录说明
- /, 根目录是整个系统最重要的一个目录，因为不但所有的目录都是由根目录衍生出来的， 同时根目录也与开机/还原/系统修复等动作有关。 由于系统开机时需要特定的开机软件、核心文件、开机所需程序、 函式库等等文件数据，若系统出现错误时，根目录也必须要包含有能够修复文件系统的程序才行。
	- /bin, 系统有很多放置执行档的目录，但 /bin 比较特殊。因为 /bin 放置的是在单人维护模式下还能够被操作的指令。在 /bin 底下的指令可以被root与一般帐号所使用，主要有：cat,chmod, chown, date, mv, mkdir, cp, bash 等等常用的指令。
	- /boot, 主要放置开机会使用到的档案，包括Linux核心档案以及开机选单与开机所需设定档等等。Linux kernel常用的档名为：vmlinuz ，如果使用的是grub这个开机管理程式，则还会存在 /boot/grub/ 这个目录。
	- /dev, 在 Linux 系统上，任何装置与周边设备都是以档案的型态存在于这个目录当中。 只要通过存取这个目录下的某个档案，就等于存取某个装置。比要重要的档案有 /dev/null, /dev/zero, /dev/tty , /dev/lp\*, /dev/hd\*, /dev/sd\* 等等
	- /etc, 系统主要的设定档几乎都放置在这个目录内，例如人员的帐号密码档、各种服务的启始档等等。 一般来说，这个目录下的各档案属性是可以让一般使用者查阅的，但是只有root有权力修改。 FHS建议不要放置可执行档(binary)在这个目录中。 比较重要的档案有：/etc/inittab, /etc/init.d/, /etc/modprobe.conf, /etc/X11/, /etc/fstab, /etc/sysconfig/ 等等。 另外，其下重要的目录有：
		- /etc/init.d/ ：所有服务的预设启动script都是放在这里的，例如要启动或者关闭 iptables 的会话
		- /etc/init.d/iptables start、/etc/init.d/ iptables stop /etc/xinetd.d/ ：这就是所谓的 super daemon 管理的各项服务的设定档目录。
		- /etc/X11/ ：与 X Window 有关的各种设定档都在这里，尤其是 xorg.conf 或 XF86Config 这两个 X Server 的设定档。
	- /home, 这是系统预设的使用者 home directory。 在你新增一个一般使用者帐号时，预设的使用者 home directory 都会规范到这里来。比较重要的是， home directory 有两种代号: ~ 代表当前使用者的 home directory ，而 ~guest 则代表用户名为 guest 的 home directory 。
	- /lib, 系统的函式库非常的多，而/lib放置的则是在开机时会用到的函式库，以及在/bin或/sbin底下的指令会呼叫的函式库而已 。 什么是函式库呢？妳可以将他想成是外挂，某些指令必须要有这些外挂才能够顺利完成程式的执行之意。 尤其重要的是/lib/modules/这个目录，因为该目录会放置核心相关的模组(驱动程式)。
	- /media, media是媒体的英文，顾名思义，这个/media底下放置的就是可移除的装置。 包括软碟、光碟、DVD等等装置都暂时挂载于此。 常见的档名有：/media/floppy, /media/cdrom等等。
	- /mnt, 如果妳想要暂时挂载某些额外的装置，一般建议妳可以放置到这个目录中。在古早时候，这个目录的用途与/media相同啦。 只是有了/media之后，这个目录就用来暂时挂载用了。
	- /opt, 这个是给第三方协力软体放置的目录 。 什么是第三方协力软体啊？举例来说，KDE这个桌面管理系统是一个独立的计画，不过他可以安装到Linux系统中，因此KDE的软体就建议放置到此目录下了。 另外，如果妳想要自行安装额外的软体(非原本的distribution提供的)，那么也能够将你的软体安装到这里来。 不过，以前的Linux系统中，我们还是习惯放置在/usr/local目录下。
	- /root, 系统管理员(root)的 home directory 。 之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有root的 home directory ，所以我们会希望root的 home directory 与根目录放置在同一个分区中。
	- /sbin, Linux有非常多指令是用来设定系统环境的，这些指令只有root才能够利用来设定系统，其他使用者最多只能用来查询而已。放在/sbin底下的为开机过程中所需要的，里面包括了开机、修复、还原系统所需要的指令。至于某些伺服器软体程式，一般则放置到/usr/sbin/当中。至于本机自行安装的软体所产生的系统执行档(system binary)，则放置到/usr/local/sbin/当中了。常见的指令包括：fdisk, fsck, ifconfig, init, mkfs等等。
	/srv, srv可以视为service的缩写，是一些网路服务启动之后，这些服务所需要取用的资料目录。 常见的服务例如WWW, FTP等等。 举例来说，WWW伺服器需要的网页资料就可以放置在/srv/www/里面。呵呵，看来平时我们编写的代码应该放到这里了。
	- /tmp, 这是让一般使用者或者是正在执行的程序暂时放置档案的地方。这个目录是任何人都能够存取的，所以你需要定期的清理一下。当然，重要资料不可放置在此目录啊。 因为FHS甚至建议在开机时，应该要将/tmp下的资料都删除。
	- /lost+found, 这个目录是使用标准的ext2/ext3档案系统格式才会产生的一个目录，目的在于当档案系统发生错误时，将一些遗失的片段放置到这个目录下。 这个目录通常会在分割槽的最顶层存在，例如你加装一个硬盘于/disk中，那在这个系统下就会自动产生一个这样的目录/disk/lost+found
	- /proc, 这个目录本身是一个虚拟文件系统(virtual filesystem)喔。 他放置的资料都是在内存当中，例如系统核心、行程资讯(process)（是进程吗?）、周边装置的状态及网络状态等等。因为这个目录下的资料都是在记忆体（内存）当中，所以本身不占任何硬盘空间。比较重要的档案（目录）例如： /proc/cpuinfo, /proc/dma, /proc/interrupts, /proc/ioports, /proc/net/*等等。呵呵，是虚拟内存吗[guest]？
	- /sys, 这个目录其实跟/proc非常类似，也是一个虚拟的档案系统，主要也是记录与核心相关的资讯。 包括目前已载入的核心模组与核心侦测到的硬体装置资讯等等。 这个目录同样不占硬盘容量。
	- /usr, Unix Software Resource. 所有系统默认的软件(distribution发布者提供的软件)都会放置到/usr底下.
		- /usr/X11R6/, 为 X Window System 重要数据所放置的目录，之所以取名为 X11R6 是因为最后的X版本为第11版，且该版的第6次释出之意.
		- /usr/bin/, 绝大部分的用户可使用指令都放在这里。请注意到他与/bin的不同之处。(是否与开机过程有关) 
		- /usr/include/, c/c++等程序语言的档头(header)与包含档(include)放置处，当我们以tarball方式 (*.tar.gz 的方式安装软件)安装某些数据时，会使用到里头的许多包含档。 
		- /usr/lib/, 包含各应用软件的函式库、目标文件(object file)，以及不被一般使用者惯用的执行档或脚本(script)。 某些软件会提供一些特殊的指令来进行服务器的设定，这些指令也不会经常被系统管理员操作， 那就会被摆放到这个目录下啦。要注意的是，如果你使用的是X86_64的Linux系统， 那可能会有/usr/lib64/目录产生 
		- /usr/local/, 统管理员在本机自行安装自己下载的软件(非distribution默认提供者)，建议安装到此目录， 这样会比较便于管理。举例来说，你的distribution提供的软件较旧，你想安装较新的软件但又不想移除旧版， 此时你可以将新版软件安装于/usr/local/目录下，可与原先的旧版软件有分别啦。 你可以自行到/usr/local去看看，该目录下也是具有bin, etc, include, lib...的次目录 
		- /usr/sbin/, 非系统正常运作所需要的系统指令。最常见的就是某些网络服务器软件的服务指令(daemon) 
		- /usr/share/, 放置共享文件的地方，在这个目录下放置的数据几乎是不分硬件架构均可读取的数据， 因为几乎都是文本文件嘛。在此目录下常见的还有这些次目录：
			- /usr/share/man：联机帮助文件
			- /usr/share/doc：软件杂项的文件说明
			- /usr/share/zoneinfo：与时区有关的时区文件
		- /usr/src/, 一般原始码建议放置到这里，src有source的意思。至于核心原始码则建议放置到/usr/src/linux/目录下。
	- /var主要针对常态性变动的文件，包括缓存(cache)、登录档(log file)以及某些软件运作所产生的文件， 包括程序文件(lock file, run file)，或者例如MySQL数据库的文件等等。
		- /var/cache/, 应用程序本身运作过程中会产生的一些暂存档
		- /var/lib/, 程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。 举例来说，MySQL的数据库放置到/var/lib/mysql/而rpm的数据库则放到/var/lib/rpm去
		- /var/lock/, 某些装置或者是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该装置时， 就可能产生一些错误的状况，因此就得要将该装置上锁(lock)，以确保该装置只会给单一软件所使用。 举例来说，刻录机正在刻录一块光盘，你想一下，会不会有两个人同时在使用一个刻录机烧片？ 如果两个人同时刻录，那片子写入的是谁的数据？所以当第一个人在刻录时该刻录机就会被上锁， 第二个人就得要该装置被解除锁定(就是前一个人用完了)才能够继续使用
		- /var/log/, 非常重要。这是登录文件放置的目录。里面比较重要的文件如/var/log/messages, /var/log/wtmp(记录登入者的信息)等。
		- /var/mail/, 放置个人电子邮件信箱的目录，不过这个目录也被放置到/var/spool/mail/目录中，通常这两个目录是互为链接文件。
		- /var/run/, 某些程序或者是服务启动后，会将他们的PID放置在这个目录下
		- /var/spool/, 这个目录通常放置一些队列数据，所谓的“队列”就是排队等待其他程序使用的数据。 这些数据被使用后通常都会被删除。举例来说，系统收到新信会放置到/var/spool/mail/中， 但使用者收下该信件后该封信原则上就会被删除。信件如果暂时寄不出去会被放到/var/spool/mqueue/中， 等到被送出后就被删除。如果是工作排程数据(crontab)，就会被放置到 /var/spool/cron/ 目录中。













